<?php

return <<<'VALUE'
"namespace IPS\\Theme;\n\tfunction email_html_core_unsubscribeBulk( $member, $email ) {\n\t\t$return = '';\n\t\t$return .= <<<IPSCONTENT\n\n<tr>\n\t<td dir='{dir}' valign=\"top\"><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t<td dir='{dir}' valign='middle' align='center' style=\"font-family: 'Helvetica Neue', helvetica, sans-serif; font-size: 12px; line-height: 18px;\">\n\t\t{$email->language->addToStack(\"unsubscribe_blurb\", FALSE)} <a href=\"\nIPSCONTENT;\n\nif ( $member instanceof \\IPS\\Member ):\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=unsubscribe&email=\", \"front\", \"unsubscribe\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<IPSCONTENT\n{$member->email}&key=\nIPSCONTENT;\n\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( md5( $member->email . ':' . $member->members_pass_hash ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n\nelse:\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=unsubscribe&email=\", \"front\", \"unsubscribe\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<IPSCONTENT\n*|member_email|*&key=*|unsubscribe_key|*\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\" style='color: #4a8aca; text-decoration: none; display: inline-block'>{$email->language->addToStack( 'unsubscribe', FALSE )}<\/a>.\n\t\t<br \/>\n\t<\/td>\n<\/tr>\nIPSCONTENT;\n\n\t\treturn $return;\n}\n\tfunction email_plaintext_core_unsubscribeBulk( $member, $email ) {\n\t\t$return = '';\n\t\t$return .= <<<IPSCONTENT\n\n{$email->language->addToStack(\"unsubscribe_blurb\", FALSE)} {$email->language->addToStack( 'unsubscribe', FALSE )}: \nIPSCONTENT;\n\nif ( $member instanceof \\IPS\\Member ):\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n\n$return .= \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=unsubscribe&email=\", \"front\", \"unsubscribe\", array(), 0 );\n$return .= <<<IPSCONTENT\n{$member->email}&key=\nIPSCONTENT;\n\n$return .= md5( $member->email . ':' . $member->members_pass_hash );\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n\nelse:\n$return .= <<<IPSCONTENT\n*|unsubscribe_url|*\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n\n\t\treturn $return;\n}"
VALUE;
