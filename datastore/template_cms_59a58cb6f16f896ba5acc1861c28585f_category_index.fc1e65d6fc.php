<?php

return <<<'VALUE'
"namespace IPS\\Theme;\nclass class_cms_database_category_index\n{\n\tfunction categoryRow( $category ) {\n\t\t$return = '';\n\t\t$return .= <<<IPSCONTENT\n\n\nIPSCONTENT;\n\n$RecordsClass = $category::$contentItemClass;\n$return .= <<<IPSCONTENT\n\n\nIPSCONTENT;\n\nif ( $category->can('view') ):\n$return .= <<<IPSCONTENT\n\n    \nIPSCONTENT;\n\n$lastPost = $category->lastPost();\n$return .= <<<IPSCONTENT\n\n\t<li class=\"ipsData__item\" data-categoryID=\"\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $category->_id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n\" \nIPSCONTENT;\n\nif ( $RecordsClass::containerUnread( $category ) ):\n$return .= <<<IPSCONTENT\ndata-ips-unread\nIPSCONTENT;\n\nelse:\n$return .= <<<IPSCONTENT\ndata-ips-read\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n>\n\t\t<a href=\"\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $category->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n\" class=\"ipsLinkPanel\" aria-hidden=\"true\" tabindex=\"-1\"><span>\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $category->_title, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n<\/span><\/a>\n\t\t<figure class=\"ipsData__image\">\n\t\t\t\nIPSCONTENT;\n\nif ( $image = $category->primaryImage() ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t<img src=\"\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $image->url, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n\" alt=\"\" loading=\"lazy\">\n\t\t\t\nIPSCONTENT;\n\nelse:\n$return .= <<<IPSCONTENT\n\n\t\t\t\t<i><\/i>\n\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t<\/figure>\n\t\t<div class=\"ipsData__content\">\n\t\t\t<div class=\"ipsData__main\">\n\t\t\t\t<h4 class=\"ipsData__title\">\n\t\t\t\t\t\nIPSCONTENT;\n\nif ( $RecordsClass::containerUnread( $category ) ):\n$return .= <<<IPSCONTENT\n<span class='ipsIndicator'><\/span>\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t<a href=\"\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $category->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n\">\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $category->_title, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n<\/a>\n\t\t\t\t<\/h4>\n\t\t\t\t\nIPSCONTENT;\n\nif ( $category->hasChildren() ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t<ul class=\"ipsSubList\">\n\t\t\t\t\t\t\nIPSCONTENT;\n\nforeach ( $category->children() as $subCategory ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t<li class=\"ipsSubList__item \nIPSCONTENT;\n\nif ( $RecordsClass::containerUnread( $subCategory ) ):\n$return .= <<<IPSCONTENT\nipsSubList__item--unread\nIPSCONTENT;\n\nelse:\n$return .= <<<IPSCONTENT\nipsSubList__item--read\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\">\n\t\t\t\t\t\t\t\t<a href=\"\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $subCategory->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n\">\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $subCategory->_title, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n<\/a>\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nIPSCONTENT;\n\nendforeach;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t<\/ul>\n\t\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\nIPSCONTENT;\n\nif ( $category->_description ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t<div class=\"ipsData__desc\">{$category->_description}<\/div>\n\t\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t\t<\/div>\n\t\t\t<div class=\"ipsData__extra\">\n\t\t\t\t\nIPSCONTENT;\n\nif ( $lastPost ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t<ul class=\"ipsData__stats\">\n\t\t\t\t\t\t\nIPSCONTENT;\n\n$count = $RecordsClass::contentCount( $category, FALSE );\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<span>\nIPSCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->formatNumber( $count );\n$return .= <<<IPSCONTENT\n<\/span>\n\t\t\t\t\t\t\t<span>\nIPSCONTENT;\n\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( \\IPS\\cms\\Databases::load( $category->database_id )->recordWord( $count ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n<\/span>\n\t\t\t\t\t\t<\/li>\n\t\t\t\t\t<\/ul>\n\t\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t<div class=\"ipsData__last\">\n\t\t\t\t\t\nIPSCONTENT;\n\nif ( $lastPost ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\nIPSCONTENT;\n\n$return .= \\IPS\\cms\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( $lastPost['author'], 'tiny' );\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t<div class='ipsData__last-text'>\n\t\t\t\t\t\t\t<div class='ipsData__last-primary'><a href=\"\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $lastPost['record_url'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n\" title='\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $lastPost['record_title'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n'>\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $lastPost['record_title'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n<\/a><\/div>\n\t\t\t\t\t\t\t<div class='ipsData__last-secondary'>\n\t\t\t\t\t\t\t\t\nIPSCONTENT;\n\nif ( $category->last_poster_anon ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\t\t\nIPSCONTENT;\n\n$htmlsprintf = array($lastPost['author']->link( NULL, NULL, TRUE )); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'byline_nodate', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<IPSCONTENT\n,\n\t\t\t\t\t\t\t\t\nIPSCONTENT;\n\nelse:\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\t\t\nIPSCONTENT;\n\n$htmlsprintf = array($lastPost['author']->link()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'byline_nodate', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<IPSCONTENT\n,\n\t\t\t\t\t\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\t<a href='\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $lastPost['record_url']->setQueryString( 'do', 'getLastComment' ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n' title='\nIPSCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'get_last_post', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<IPSCONTENT\n'>\nIPSCONTENT;\n\n$val = ( $lastPost['date'] instanceof \\IPS\\DateTime ) ? $lastPost['date'] : \\IPS\\DateTime::ts( $lastPost['date'] );$return .= $val->html();\n$return .= <<<IPSCONTENT\n<\/a>\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\nIPSCONTENT;\n\nelse:\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t<div class='i-color_soft'>\nIPSCONTENT;\n\n$sprintf = array(\\IPS\\cms\\Databases::load( $category->database_id )->recordWord()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'content_categories_index_no_records', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<IPSCONTENT\n<\/div>\n\t\t\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/li>\n\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction index( $database, $categories, $url ) {\n\t\t$return = '';\n\t\t$return .= <<<IPSCONTENT\n\n<header class='ipsPageHeader ipsBox ipsPull ipsPageHeader--database-index'>\n\t<div class=\"ipsPageHeader__row\">\n\t\t<div class='ipsPageHeader__primary'>\n\t\t\t<h1 class='ipsPageHeader__title'>\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $database->_title, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n<\/h1>\n\t\t\t\nIPSCONTENT;\n\nif ( $database->_description ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t<div class='ipsPageHeader__desc'>\n\t\t\t\t\t\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $database->_description, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n\n\t\t\t\t<\/div>\n\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t<\/div>\n\t\t\nIPSCONTENT;\n\nif ( $database->cat_index_type == 1 ):\n$return .= <<<IPSCONTENT\n\n\t\t\t<div class=\"ipsButtons\">\n\t\t\t\t<a href=\"\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $url, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n\" class=\"ipsButton ipsButton--small ipsButton--text\"><i class=\"fa-solid fa-star\"><\/i> \nIPSCONTENT;\n\n$sprintf = array($database->recordWord()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cms_show_featured', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<IPSCONTENT\n<\/a>\n\t\t\t<\/div>\n\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t<\/div>\n<\/header>\n<section>\n\t<ol class='cCmsDatabase_index' data-controller='core.global.core.table, forums.front.forum.forumList' data-baseURL=''>\n\t\t<li class='ipsBox ipsPull'>\n\t\t\t<h2 class=\"ipsBox__header\">\n\t\t\t\t\nIPSCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'content_categories_title', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<IPSCONTENT\n\n\t\t\t<\/h2>\n\t\t\t\nIPSCONTENT;\n\nif ( ! \\count($categories) ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t<div class=\"ipsBox ipsBox--padding\">\nIPSCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cms_no_cats_to_show', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<IPSCONTENT\n<\/div>\n\t\t\t\nIPSCONTENT;\n\nelse:\n$return .= <<<IPSCONTENT\n\n\t\t\t\t<i-data>\n\t\t\t\t\t<ol class=\"ipsData ipsData--\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $database->display_settings['categories']['layout'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n ipsData--category ipsData--database-category\">\n\t\t\t\t\t\t\nIPSCONTENT;\n\nforeach ( $categories as $category ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\nIPSCONTENT;\n\n$return .= \\IPS\\cms\\Theme::i()->getTemplate( \"category_index\", \"cms\", 'database' )->categoryRow( $category );\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\nIPSCONTENT;\n\nendforeach;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t<\/ol>\n\t\t\t\t<\/i-data>\n\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t<\/li>\n\t<\/ol>\n<\/section>\nIPSCONTENT;\n\n\t\treturn $return;\n}}"
VALUE;
