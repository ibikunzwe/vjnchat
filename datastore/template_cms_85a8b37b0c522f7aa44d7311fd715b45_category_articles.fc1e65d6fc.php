<?php

return <<<'VALUE'
"namespace IPS\\Theme;\nclass class_cms_database_category_articles\n{\n\tfunction entry( $record, $database ) {\n\t\t$return = '';\n\t\t$return .= <<<IPSCONTENT\n\n<article class=\"ipsData__item \nIPSCONTENT;\n\nif ( $record->hidden() ):\n$return .= <<<IPSCONTENT\nipsModerated\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\" \nIPSCONTENT;\n\nif ( $record->unread() ):\n$return .= <<<IPSCONTENT\ndata-ips-unread\nIPSCONTENT;\n\nelse:\n$return .= <<<IPSCONTENT\ndata-ips-read\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n>\n\t<a href='\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $record->url( \"getPrefComment\" ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n' class=\"ipsLinkPanel\" aria-hidden=\"true\" tabindex=\"-1\"><span>\nIPSCONTENT;\n\n$return .= htmlspecialchars( $record->_title, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n<\/span><\/a>\n\t\nIPSCONTENT;\n\nif ( $record->showRecordImage() ):\n$return .= <<<IPSCONTENT\n\n\t    <a href='\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $record->url( \"getPrefComment\" ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n' class=\"ipsData__image\" aria-hidden=\"true\" tabindex=\"-1\">\n\t\t    \nIPSCONTENT;\n\nif ( $record->record_image ):\n$return .= <<<IPSCONTENT\n\n\t\t\t    <img src='\nIPSCONTENT;\n\n$return .= \\IPS\\File::get( \"cms_Records\", $record->record_image )->url;\n$return .= <<<IPSCONTENT\n' loading=\"lazy\" alt=\"\">\n\t\t    \nIPSCONTENT;\n\nelse:\n$return .= <<<IPSCONTENT\n\n\t\t\t    <i><\/i>\n\t\t        \nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t    <\/a>\n\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t<div class=\"ipsData__content\">\n\t\t<div class=\"ipsData__main\">\n\t\t\t\nIPSCONTENT;\n\nif ( $record::database()->use_categories ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t<div class=\"ipsContainerTitle\" hidden><a href=\"\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $record->container()->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n\">\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $record->container()->_title, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n<\/a><\/div>\n\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t\t<div class=\"ipsData__title\">\n\t\t\t\t<span class=\"ipsBadges\">\n\t\t\t\t\t\nIPSCONTENT;\n\n$return .= \\IPS\\cms\\Theme::i()->getTemplate( \"global\", \"core\" )->assignmentBadge( $record, '' );\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\nIPSCONTENT;\n\nif ( $record->prefix() ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\nIPSCONTENT;\n\n$return .= \\IPS\\cms\\Theme::i()->getTemplate( \"global\", \"core\" )->prefix( $record->prefix( TRUE ), $record->prefix() );\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\nIPSCONTENT;\n\nforeach ( $record->badges() as $badge ):\n$return .= <<<IPSCONTENT\n{$badge}\nIPSCONTENT;\n\nendforeach;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t<\/span>\n\t\t\t\t<h2>\n\t\t\t\t\t\nIPSCONTENT;\n\nif ( $record->unread() ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t<a href='\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $record->url(\"getNewComment\"), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n' class='ipsIndicator' data-ipsTooltip title='\nIPSCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cms_unread_record', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<IPSCONTENT\n'><\/a>\n\t\t\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t<a href='\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $record->url( \"getPrefComment\" ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n' title='\nIPSCONTENT;\n\n$sprintf = array($record->_title); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'read_more_about', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<IPSCONTENT\n'>\nIPSCONTENT;\n\n$return .= htmlspecialchars( $record->_title, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n<\/a>\n\t\t\t\t<\/h2>\n\t\t\t<\/div>\n\t\t\t<section class='ipsData__desc ipsRichText'>\n\t\t\t\t{$record->truncated()}\n\t\t\t<\/section>\n\t\t\t\nIPSCONTENT;\n\nif ( \\count( $record->customFieldsForDisplay('listing') ) ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t<ul class='ipsData__fields'>\n\t\t\t\t\t\nIPSCONTENT;\n\nforeach ( $record->customFieldsForDisplay('listing') as $fieldId => $fieldValue ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\nIPSCONTENT;\n\nif ( $fieldValue ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t<li>{$fieldValue}<\/li>\n\t\t\t\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\nIPSCONTENT;\n\nendforeach;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t<\/ul>\n\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t\t\nIPSCONTENT;\n\nif ( \\count( $record->tags() ) ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\nIPSCONTENT;\n\n$return .= \\IPS\\cms\\Theme::i()->getTemplate( \"global\", \"core\" )->tags( $record->tags() );\n$return .= <<<IPSCONTENT\n\n\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t<\/div>\n\t\t<div class=\"ipsData__extra\">\n\t\t\t<ul class=\"ipsData__stats\">\n\t\t\t\t\nIPSCONTENT;\n\nif ( $record::database()->options['comments'] ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t<li data-stattype=\"comments\" data-v=\"\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $record->record_comments, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n\"><a href='\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $record->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n#comments' title='\nIPSCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'view_comments', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<IPSCONTENT\n'>\nIPSCONTENT;\n\n$pluralize = array( $record->record_comments ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'num_comments', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<IPSCONTENT\n<\/a><\/li>\n\t\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t<li data-stattype=\"views\">\nIPSCONTENT;\n\n$pluralize = array( $record->record_views ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'num_views_with_number', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<IPSCONTENT\n<\/li>\n\t\t\t\t\nIPSCONTENT;\n\nif ( $record::database()->options['reviews'] and ($record->averageReviewRating() > 0 or $record->memberReviewRating() > 0) ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t<li>\nIPSCONTENT;\n\n$return .= \\IPS\\cms\\Theme::i()->getTemplate( \"global\", \"core\" )->rating( 'small', $record->averageReviewRating(), \\IPS\\Settings::i()->reviews_rating_out_of, $record->memberReviewRating() );\n$return .= <<<IPSCONTENT\n<\/li>\n\t\t\t\t\nIPSCONTENT;\n\nelseif ( $record->container()->allow_rating ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t<li>\nIPSCONTENT;\n\n$return .= \\IPS\\cms\\Theme::i()->getTemplate( \"global\", \"core\", 'front' )->rating( 'small', $record->rating_value, \\IPS\\Settings::i()->reviews_rating_out_of );\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t\t<\/ul>\n\t\t\t<div class=\"ipsData__last\">\n\t\t\t\t\nIPSCONTENT;\n\n$return .= \\IPS\\cms\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( $record->author() );\n$return .= <<<IPSCONTENT\n\n\t\t\t\t<div class=\"ipsData__last-text\">\n\t\t\t\t\t<div class=\"ipsData__last-primary\">\n\t\t\t\t\t\t{$record->author()->link( NULL, NULL, $record->isAnonymous() )}\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div class=\"ipsData__last-secondary\">\nIPSCONTENT;\n\n$val = ( $record->mapped( 'date' ) instanceof \\IPS\\DateTime ) ? $record->mapped( 'date' ) : \\IPS\\DateTime::ts( $record->mapped( 'date' ) );$return .= $val->html();\n$return .= <<<IPSCONTENT\n<\/div>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/div>\n<\/article>\nIPSCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction index( $database, $articles, $url, $pagination ) {\n\t\t$return = '';\n\t\t$return .= <<<IPSCONTENT\n\n<header class='ipsPageHeader ipsBox ipsPull ipsPageHeader--category-articles'>\n\t<div class=\"ipsPageHeader__row\">\n\t\t<div class='ipsPageHeader__primary'>\n\t\t\t<h1 class='ipsPageHeader__title'>\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $database->_title, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n<\/h1>\n\t\t\t\nIPSCONTENT;\n\nif ( $database->_description ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t<div class='ipsPageHeader__desc'>\n\t\t\t\t\t\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $database->_description, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n\n\t\t\t\t<\/div>\n\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t<\/div>\n\t\t<div class=\"ipsButtons\">\n\t\t\t\nIPSCONTENT;\n\nif ( $database->use_categories ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t<a href=\"\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $url->setQueryString('show', 'categories'), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n\" class=\"ipsButton ipsButton--inherit\"><i class=\"fa-solid fa-folder-open\"><\/i> \nIPSCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cms_show_categories', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<IPSCONTENT\n<\/a>\n\t\t\t\nIPSCONTENT;\n\nelse:\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\nIPSCONTENT;\n\n$catClass = 'IPS\\cms\\Categories' . $database->id; $category = $catClass::load( $database->default_category );\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\nIPSCONTENT;\n\n$return .= \\IPS\\cms\\Theme::i()->getTemplate( \"global\", \"core\" )->follow( 'cms','categories' . $database->id, $category->_id, \\IPS\\cms\\Records::containerFollowerCount( $category ) );\n$return .= <<<IPSCONTENT\n\n\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t<\/div>\n\t<\/div>\n<\/header>\n\n\nIPSCONTENT;\n\nif ( $database->can('add') or \\IPS\\Member::loggedIn()->member_id ):\n$return .= <<<IPSCONTENT\n\n\t<ul class=\"ipsButtons ipsButtons--main i-margin-block_block\">\n\t\t\nIPSCONTENT;\n\nif ( $database->can('add') ):\n$return .= <<<IPSCONTENT\n\n\t\t\t<li>\n\t\t\t\t<a class=\"ipsButton ipsButton--primary\" \nIPSCONTENT;\n\nif ( $database->use_categories ):\n$return .= <<<IPSCONTENT\ndata-ipsDialog=\"1\" data-ipsDialog-size=\"narrow\" data-ipsDialog-title=\"\nIPSCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cms_select_category', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<IPSCONTENT\n\"\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n href=\"\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $url->setQueryString( array( 'do' => 'form', 'd' => \\IPS\\cms\\Databases\\Dispatcher::i()->databaseId ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n\">\nIPSCONTENT;\n\n$sprintf = array($database->recordWord( 1 )); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cms_add_new_record_button', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<IPSCONTENT\n<\/a>\n\t\t\t<\/li>\n\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t<\/ul>\n\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\n\nIPSCONTENT;\n\nif ( \\count($articles) ):\n$return .= <<<IPSCONTENT\n\n\t<section class='ipsBox ipsPull'>\n\t\t<i-data>\n\t\t\t<div class=\"ipsData ipsData--entries ipsData--\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $database->display_settings['index']['layout'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n ipsData--cms-category-articles\">\n\t\t\t\t\nIPSCONTENT;\n\nforeach ( $articles as $id => $record ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\nIPSCONTENT;\n\n$return .= \\IPS\\cms\\Theme::i()->getTemplate( \"category_articles\", \"cms\", 'database' )->entry( $record, $database );\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\nIPSCONTENT;\n\nendforeach;\n$return .= <<<IPSCONTENT\n\n\t\t\t<\/div>\n\t\t<\/i-data>\n\t<\/section>\n\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\nIPSCONTENT;\n\n$return .= \\IPS\\cms\\Theme::i()->getTemplate( \"global\", \"core\", 'global' )->pagination( $url, $pagination['pages'], $pagination['page'], ( $database->field_perpage ?? 25 ), TRUE, 'page' );\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n\n\t\treturn $return;\n}}"
VALUE;
