<?php

return <<<'VALUE'
"namespace IPS\\Theme;\n\tfunction email_html_core_emailWrapper( $subject, $member, $content, $unsubscribe, $placeholderRecipient=FALSE, $introText='', $email=NULL, $ourPicks=NULL ) {\n\t\t$return = '';\n\t\t$return .= <<<IPSCONTENT\n\n<!DOCTYPE html>\n<html xmlns=\"http:\/\/www.w3.org\/1999\/xhtml\" dir=\"{dir}\">\n\t<head>\n\t\t<meta http-equiv=\"Content-Type\" content=\"text\/html; charset=utf-8\" \/>\n\t\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\/>\n\t\t<title>\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $subject, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n<\/title>\n\t\t<style type=\"text\/css\">\n\t\t\n\t\t\t#outlook a {padding:0;}\n\t\t\tbody{width:100% !important; -webkit-text-size-adjust:100%; -ms-text-size-adjust:100%; margin:0; padding:0;} \n\t\t\t.ExternalClass {width:100%;}\n\t\t\t.ExternalClass, .ExternalClass p, .ExternalClass span, .ExternalClass font, .ExternalClass td, .ExternalClass div {line-height: 100%;}\n\t\t\t#backgroundTable {margin:0; padding:0; width:100% !important; line-height: 100% !important;}\n\n\t\t\timg {outline:none; text-decoration:none; -ms-interpolation-mode: bicubic;} \n\t\t\ta img {border:none;} \n\n\t\t\tp {margin: 1em 0;}\n\n\t\t\th1, h2, h3, h4, h5, h6 {color: #000 !important;}\n\n\t\t\ttable td {border-collapse: collapse;}\n\n\t\t\ttable { border-collapse:collapse; mso-table-lspace:0pt; mso-table-rspace:0pt; }\n\n\t\t\ta {\n\t\t\t\tcolor: currentColor;\n\t\t\t\ttext-decoration: underline;\n\t\t\t}\n\t\t\t\n\t\t\t\/* Unhides cells that we set to hide in the HTML in case the client doesn't support style properly *\/\n\t\t\t*[class~=hidePhone] {\n\t\t\t    display : block !important;\n\t\t\t    width : auto !important;\n\t\t\t    max-height: inherit !important;\n\t\t\t    overflow : visible !important;\n\t\t\t    float : none !important;\n\t\t\t}\n\n\t\t\t*[class~=hidePhone][width=\"30\"] {\n\t\t\t\twidth: 30px !important;\n\t\t\t}\n\n\t\t\t*[class~=hidePhone][width=\"40\"] {\n\t\t\t\twidth: 40px !important;\n\t\t\t}\n\n\t\t\ttd[class~=hidePhone] {\n\t\t\t\tdisplay: table-cell !important;\n\t\t\t}\n\n\t\t\t.ipsImage {\n\t\t\t\tmax-width: 100% !important;\n\t\t\t\theight: auto !important;\n\t\t\t}\n\n\t\t\t\/* Attachment styles for rich text *\/\n\t\t\t.ipsAttachLink_image,\n\t\t\t.ipsAttachLink {\n\t\t\t\tmargin-bottom: 15px;\n\t\t\t}\n\t\t\t\n\t\t\thtml[dir=\"ltr\"] .ipsAttachLink_image.ipsAttachLink_right,\n\t\t\thtml[dir=\"ltr\"] .ipsAttachLink.ipsAttachLink_right,\n\t\t\thtml[dir=\"rtl\"] .ipsAttachLink_image.ipsAttachLink_left,\n\t\t\thtml[dir=\"rtl\"] .ipsAttachLink.ipsAttachLink_left {\n\t\t\t\tmargin-left: 30px;\n\t\t\t}\n\t\t\thtml[dir=\"ltr\"] .ipsAttachLink_image.ipsAttachLink_left, \n\t\t\thtml[dir=\"ltr\"] .ipsAttachLink.ipsAttachLink_left, \n\t\t\thtml[dir=\"rtl\"] .ipsAttachLink_image.ipsAttachLink_right, \n\t\t\thtml[dir=\"rtl\"] .ipsAttachLink.ipsAttachLink_right {\n\t\t\t\tmargin-right: 30px;\n\t\t\t}\n\n\t\t\t@media only screen and (max-width: 480px) {\n\n\t\t\t\t#userPhoto, .hidePhone, *[class~=hidePhone], td[class~=hidePhone] {\n\t\t\t\t\tdisplay: none !important;\n\t\t\t\t}\n\n\t\t\t\t.responsive_table > tr > td, .responsive_table > tbody > tr > td,\n\t\t\t\t.responsive_table > tr, .responsive_table > tbody > tr {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\ttext-align: left;\n\t\t\t\t}\n\n\t\t\t\thtml[dir=\"rtl\"] .responsive_table > tr > td, html[dir=\"rtl\"] .responsive_table > tbody > tr > td,\n\t\t\t\thtml[dir=\"rtl\"] .responsive_table > tr, html[dir=\"rtl\"] .responsive_table > tbody > tr {\n\t\t\t\t\ttext-align: right;\n\t\t\t\t}\n\n\t\t\t\t.responsive_row {\n\t\t\t\t\tmargin-bottom: 10px;\n\t\t\t\t}\n\n\t\t\t\t.responsive_fullwidth {\n\t\t\t\t\twidth: 100% !important;\n\t\t\t\t}\n\n\t\t\t\t.cOurPicksRow {\n\t\t\t\t\tmargin-bottom: 30px;\n\t\t\t\t\tpadding-bottom: 30px;\n\t\t\t\t\tborder-bottom: 1px solid #e7eef5;\n\t\t\t\t}\n\t\t\t}\n\t\t<\/style>\n\t<\/head>\n\t<body style='direction: {dir};' bgcolor=\"#eef2f6\">\n\t\t<table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" width=\"100%\" bgcolor=\"#eef2f6\" style=\"color: #3b526a; font-family: system-ui, system-ui, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\">\n\t\t\t<tr>\n\t\t\t\t<td dir='{dir}' valign=\"top\"><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t\t\t\t<td dir='{dir}' valign='middle' style=\"font-size: 30px; font-weight: 300; line-height: 48px; padding: 20px 10px;\">\n\t\t\t\t\t<a href='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\n' style='text-decoration: none; color: #262e33; border: 0;'>\n\t\t\t\t\t\t\nIPSCONTENT;\n\n$imgDims=NULL;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\nIPSCONTENT;\n\nif ( \\IPS\\Settings::i()->email_logo ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\nIPSCONTENT;\n\ntry { $imgDims = \\IPS\\File::get( 'core_Theme', \\IPS\\Settings::i()->email_logo )->getImageDimensions(); } catch( \\Exception $e ) {} \n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\nIPSCONTENT;\n\nif ( $imgDims ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t<img src='\nIPSCONTENT;\n\n$return .= \\IPS\\File::get( \"core_Theme\", \\IPS\\Settings::i()->email_logo )->url;\n$return .= <<<IPSCONTENT\n' alt=\"\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->board_name;\n$return .= <<<IPSCONTENT\n\" width='\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $imgDims[0], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n' height='\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $imgDims[1], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n' \/>\n\t\t\t\t\t\t\nIPSCONTENT;\n\nelse:\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->board_name;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/td>\n\t\t\t\t<td dir='{dir}' valign=\"top\"><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t\t\t<\/tr>\n\t\t\t<tr>\n\t\t\t\t<td dir='{dir}'><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t\t\t\t<td dir='{dir}' width='800' id='main' bgcolor='#ffffff' style='line-height: 1.5; border-radius: 8px;'>\n\t\t\t\t\t<div style=\"height: 8px; background: \nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->email_color;\n$return .= <<<IPSCONTENT\n; border-radius: 8px 8px 0 0;\"><\/div>\n\t\t\t\t\t<table width='100%' cellpadding='30' style=\"table-layout: fixed;\">\n\t\t\t\t\t\t{$email->getAdvertisement()}\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td dir='{dir}' style=\"font-size: 15px; line-height: 21px; overflow-wrap: break-word;\">\n\t\t\t\t\t\t\t\t\nIPSCONTENT;\n\nif ( $introText ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\t\t<h1 style=\"text-align:center; color: \nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->email_color;\n$return .= <<<IPSCONTENT\n !important; font-size: 28px; font-weight: 500 !important;\">\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $introText, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n<\/h1>\n\t\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\t\nIPSCONTENT;\n\nif ( $member->member_id  ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\t\t<strong style='font-size: 17px'>\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $email->language->addToStack(\"email_greeting_member\", FALSE, array( 'sprintf' => array( $member->name ) ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n<\/strong>\n\t\t\t\t\t\t\t\t\t<br \/>\n\t\t\t\t\t\t\t\t\nIPSCONTENT;\n\nelseif ( $placeholderRecipient ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\t\t<strong style='font-size: 17px'>\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $email->language->addToStack(\"email_greeting_member\", FALSE, array( 'sprintf' => array( '*|member_name|*' ) ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n<\/strong>\n\t\t\t\t\t\t\t\t\t<br \/>\n\t\t\t\t\t\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\n\t\t\t\t\t\t\t\t{$content}\n\t\t\t\t\t\t\t<\/td>\n\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t<\/table>\n\t\t\t\t<\/td>\n\t\t\t\t<td dir='{dir}'><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t\t\t<\/tr>\n\t\t\t<tr height='25'>\n\t\t\t\t<td><\/td>\n\t\t\t\t<td><\/td>\n\t\t\t\t<td><\/td>\n\t\t\t<\/tr>\n\t\t\t\nIPSCONTENT;\n\nif ( $ourPicks AND \\count( $ourPicks ) ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t<tr>\n\t\t\t\t\t<td dir='{dir}'><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t\t\t\t\t<td dir='{dir}' width='800' bgcolor='#ffffff' style=\"border-radius: 8px;\">\n\t\t\t\t\t\t<table width='100%' cellpadding='0' cellspacing='0' border='0' style='border-bottom: 1px solid #e7eef5;'>\n\t\t\t\t\t\t\t<tr height='15'>\n\t\t\t\t\t\t\t\t<td dir='{dir}'><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t\t\t\t\t\t\t\t<td dir='{dir}'><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t\t\t\t\t\t\t\t<td dir='{dir}'><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td dir='{dir}' width='30'><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t\t\t\t\t\t\t\t<td dir='{dir}'><b style=\"font-size: 19px; font-weight: 600;\">\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $email->language->addToStack(\"email_also_interesting\"), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n<\/b><\/td>\n\t\t\t\t\t\t\t\t<td dir='{dir}' width='30'><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t\t\t<tr height='15'>\n\t\t\t\t\t\t\t\t<td dir='{dir}'><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t\t\t\t\t\t\t\t<td dir='{dir}'><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t\t\t\t\t\t\t\t<td dir='{dir}'><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t\t<\/table>\n\t\t\t\t\t\t<table width='100%' cellpadding='30' cellspacing='0' border='0' class='responsive_table'>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<table width='100%' cellpadding='0' cellspacing='0' border='0' class='responsive_table'>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\nIPSCONTENT;\n\n$count = 0;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\nIPSCONTENT;\n\nforeach ( $ourPicks as $item ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\nIPSCONTENT;\n\nif ( $count == 2 ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr height='30'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td colspan='3' dir='{dir}' class='hidePhone' style='border-bottom: 1px solid #e7eef5;'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<\/td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr height='30'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td colspan='3' dir='{dir}' class='hidePhone'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<\/td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t<td class='responsive_fullwidth cOurPicksRow' dir='{dir}' width='48%' valign='top' style=\"font-size: 15px;\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\nIPSCONTENT;\n\n$staff = \\IPS\\Member::load( $item->added_by );\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p style='font-size: 20px; margin: 0 0 5px 0; font-weight: 500;'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $item->object()->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n\" style='color: #111; text-decoration: none;'>\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $item->ourPicksTitle, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p style=\"font-size: 13px; line-height: 21px; margin: 0; color: #5e7a98;\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $item->objectMetaDescription( $email->language ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\nIPSCONTENT;\n\nif ( $text = $item->getText(false) ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p style=\"font-size: 15px; line-height: 21px; margin-bottom: 0\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nIPSCONTENT;\n\n$return .= htmlspecialchars( mb_substr( html_entity_decode( $text ), '0', \"100\" ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE ) . ( ( mb_strlen( html_entity_decode( $text ) ) > \"100\" ) ? '&hellip;' : '' );\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p style=\"font-size: 13px; line-height: 21px; margin-top: 5px; margin-bottom: 0\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $item->object()->url(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n\" style='color: #4a8aca; text-decoration: none; font-weight: 600;'>\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $email->language->addToStack(\"digests_read_more\"), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nIPSCONTENT;\n\nif ( $counts = $item->objectDataCount( $email->language ) ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&nbsp;&nbsp;(\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $counts['words'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<br>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<table width='100%' cellpadding='0' cellspacing='0' border='0'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td dir='{dir}' width='40' valign='top'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img src='\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $staff->get_photo( true, true ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n' width='40' height='40' style='border-radius: 6px; vertical-align: middle;'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<\/td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td dir='{dir}' width='10'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='10' height='1' alt=''>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<\/td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td dir='{dir}' width='100%' style=\"font-size: 13px;\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<strong style=\"font-weight: 600;\">\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $email->language->addToStack(\"promoted_by\"), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n<\/strong><br>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $staff->name, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n<span style=\"color: #5e7a98;\">, \nIPSCONTENT;\n\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( \\IPS\\DateTime::ts( $item->added )->localeDate( $email->language ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n \nIPSCONTENT;\n\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( \\IPS\\DateTime::ts( $item->added )->localeTime( TRUE, TRUE, $email->language ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n<\/span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<\/td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<\/table>\n\t\t\t\t\t\t\t\t\t\t\t\t<\/td>\n\t\t\t\t\t\t\t\t\t\t\t\t\nIPSCONTENT;\n\n$count++;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\nIPSCONTENT;\n\nif ( $count == 1 || $count == 3 ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td dir='{dir}' width='4%' class='hidePhone'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<\/td>\n\t\t\t\t\t\t\t\t\t\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\nIPSCONTENT;\n\nif ( ( \\count( $ourPicks ) === 1 && $count == 1 ) || ( \\count( $ourPicks ) == 3 && $count == 3 ) ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td width='48%' class='hidePhone'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<\/td>\n\t\t\t\t\t\t\t\t\t\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\nIPSCONTENT;\n\nendforeach;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t\t\t\t\t<\/table>\n\t\t\t\t\t\t\t\t<\/td>\n\t\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t\t<\/table>\n\t\t\t\t\t<\/td>\n\t\t\t\t\t<td dir='{dir}'><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t\t\t\t<\/tr>\n\t\t\t\t<tr height='25'>\n\t\t\t\t\t<td dir='{dir}'><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t\t\t\t\t<td dir='{dir}'><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t\t\t\t\t<td dir='{dir}'><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t\t\t\t<\/tr>\n\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t\t\nIPSCONTENT;\n\nif ( $unsubscribe ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t{$unsubscribe}\n\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t\t\nIPSCONTENT;\n\nif ( \\IPS\\Settings::i()->privacy_type != \"none\" ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t<tr>\n\t\t\t\t\t<td dir='{dir}' valign=\"top\"><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t\t\t\t\t<td dir='{dir}' valign='middle' align='center' style=\"font-size: 12px; line-height: 18px;\">\n\t\t\t\t\t\t<a href='\nIPSCONTENT;\n\nif ( \\IPS\\Settings::i()->privacy_type == \"internal\" ):\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=privacy\", \"front\", \"privacy\", array(), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', TRUE );\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n\nelse:\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->privacy_link;\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n' style='color: #4a8aca; text-decoration: none;  display: inline-block'>\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $email->language->addToStack(\"privacy_policy_link\", FALSE), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n<\/a>\n\t\t\t\t\t<\/td>\n\t\t\t\t\t<td dir='{dir}' valign=\"top\"><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t\t\t\t<\/tr>\n\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\n\t\t\t\nIPSCONTENT;\n\nif ( \\IPS\\Settings::i()->site_social_profiles AND \\IPS\\Settings::i()->social_links_in_email AND $links = json_decode( \\IPS\\Settings::i()->site_social_profiles, TRUE ) AND \\count( $links ) ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\nIPSCONTENT;\n\n$socialColors = array('x' => '#1d9bf0;', 'internal' => '#008b00;', 'deviantart' => '#16A085;', 'email' => '#444;', 'facebook' => '#0866ff;', 'linkedin' => '#007FB1;', 'reddit' => '#FF4500;', 'stumble' => '#EB4924;', 'vk' => '#507299;', 'weibo' => '#D32F2F;', 'youtube' => '#ff0000;', 'foursquare' => '#2D5BE3;', 'etsy' => '#ec5500;', 'flickr' => '#0060d4;', 'github' => '#010101;', 'instagram' => '#d12a72;', 'pinterest' => '#df0018;', 'slack' => '#2db079;', 'xing' => '#B0D400;', 'tumblr' => '#EB4924;', 'twitch' => '#772ce8;', 'discord' => '#5d6af2;', 'bluesky' => '#0a7aff', 'tiktok' => '#000000');\n$return .= <<<IPSCONTENT\n\n\t\t\t\t<tr>\n\t\t\t\t\t<td dir='{dir}' valign=\"top\"><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t\t\t\t\t<td dir='{dir}' valign='top' width='800' align='center' style=\"font-size: 0px; line-height: 18px; padding-top: 10px;\">\n\t\t\t\t\t\t\nIPSCONTENT;\n\nforeach ( $links as $profile ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t\t\t<a href='\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $profile['key'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n' target='_blank' rel=\"noopener\" style='font-size: 12px; width: 28px; height: 28px; line-height: 28px; text-align: center; border-radius: 5px; display: inline-block; color: #fefefe !important; font-size: 15px; margin: 4px; background-color: \nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $socialColors[ $profile['value'] ], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n'><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $profile['value'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n.png' width='16' height='16' style=\"margin-top: 6px;\" alt=\"\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $profile['value'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n\"><\/a>\n\t\t\t\t\t\t\nIPSCONTENT;\n\nendforeach;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t<\/td>\n\t\t\t\t\t<td dir='{dir}' valign=\"top\"><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t\t\t\t<\/tr>\n\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t\t\nIPSCONTENT;\n\nif ( \\IPS\\Settings::i()->board_name ):\n$return .= <<<IPSCONTENT\n\n\t\t\t\t<tr>\n\t\t\t\t\t<td dir='{dir}' valign=\"top\"><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t\t\t\t\t<td dir='{dir}' valign='top' width='800' align='center' style=\"font-size: 12px; line-height: 18px; padding-top: 10px;\">\n\t\t\t\t\t\t\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->board_name;\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n\nif ( \\IPS\\Settings::i()->site_address and \\IPS\\Settings::i()->site_address != 'null' ):\n$return .= <<<IPSCONTENT\n, \nIPSCONTENT;\n\n$return .= \\IPS\\GeoLocation::parseForOutput( \\IPS\\Settings::i()->site_address );\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t\t\t\t<\/td>\n\t\t\t\t\t<td dir='{dir}' valign=\"top\"><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t\t\t\t<\/tr>\n\t\t\t\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\t\t\t<tr height='10'>\n\t\t\t\t<td dir='{dir}'><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t\t\t\t<td dir='{dir}'><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t\t\t\t<td dir='{dir}'><img src='\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->base_url;\n$return .= <<<IPSCONTENT\napplications\/core\/interface\/email\/spacer.png' width='1' height='1' alt=''><\/td>\n\t\t\t<\/tr>\n\t\t<\/table>\n\t<\/body>\n<\/html>\n\nIPSCONTENT;\n\n\t\treturn $return;\n}\n\tfunction email_plaintext_core_emailWrapper( $subject, $member, $content, $unsubscribe, $placeholderRecipient=FALSE, $introText='', $email=NULL, $ourPicks=NULL ) {\n\t\t$return = '';\n\t\t$return .= <<<IPSCONTENT\n\n\n{$email->getAdvertisement('plaintext')}\n\nIPSCONTENT;\n\nif ( $member->member_id  ):\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $email->language->addToStack(\"email_greeting_member\", FALSE, array( 'htmlsprintf' => array( $member->name ) ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n\nelseif ( $placeholderRecipient ):\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $email->language->addToStack(\"email_greeting_member\", FALSE, array( 'htmlsprintf' => array( '*|member_name|*' ) ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n{$content}\n\n-----\n\nIPSCONTENT;\n\nif ( $unsubscribe ):\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n$return .= \\IPS\\Theme\\Template::htmlspecialchars( $unsubscribe, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\n\nIPSCONTENT;\n\nif ( \\IPS\\Settings::i()->privacy_type != \"none\" ):\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n\nif ( \\IPS\\Settings::i()->privacy_type == \"internal\" ):\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n\n$return .= \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=privacy\", \"front\", \"privacy\", array(), 0 );\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n\nelse:\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->privacy_link;\n$return .= <<<IPSCONTENT\n)\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\n\n\nIPSCONTENT;\n\n$return .= \\IPS\\Settings::i()->board_name;\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n\nif ( \\IPS\\Settings::i()->site_address and \\IPS\\Settings::i()->site_address != 'null' ):\n$return .= <<<IPSCONTENT\n, \nIPSCONTENT;\n\n$return .= \\IPS\\GeoLocation::parseForOutput( \\IPS\\Settings::i()->site_address );\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n\nendif;\n$return .= <<<IPSCONTENT\n\nIPSCONTENT;\n\n\t\treturn $return;\n}"
VALUE;
